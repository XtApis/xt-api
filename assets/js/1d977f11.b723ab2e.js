"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[21877],{76772:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var r=o(53863),n=o(74848),s=o(43023);const a={id:"OrderbookManage",title:"Orderbook manage",sidebar_label:"Orderbook manage",sidebar_position:7},i=void 0,l={},c=[{value:"How to manage a local order book correctly",id:"how-to-manage-a-local-order-book-correctly",level:3}];function d(e){const t={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h3,{id:"how-to-manage-a-local-order-book-correctly",children:"How to manage a local order book correctly"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Open a stream to ",(0,n.jsx)(t.code,{children:"wss://stream.xt.com/public"}),", e.g. ",(0,n.jsx)(t.code,{children:"depth_update@btc_usdt"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"Buffer the events you receive from the stream."}),"\n",(0,n.jsxs)(t.li,{children:["Get a depth snapshot from ",(0,n.jsx)(t.code,{children:"https://sapi.xt.com/v4/public/depth?symbol=btc_usdt&limit=500"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Drop any event where ",(0,n.jsx)(t.code,{children:"i <= lastUpdateId"})," in the snapshot."]}),"\n",(0,n.jsxs)(t.li,{children:["The first processed event should have ",(0,n.jsx)(t.code,{children:"fi <= lastUpdateId + 1"})," ",(0,n.jsx)(t.strong,{children:"and"})," ",(0,n.jsx)(t.code,{children:"i >= lastUpdateId + 1"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["While listening to the stream, each new event's ",(0,n.jsx)(t.code,{children:"fi"})," should equal the previous event's ",(0,n.jsx)(t.code,{children:"i + 1"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"The data in each event is the absolute quantity for a price level."}),"\n",(0,n.jsx)(t.li,{children:"If the quantity is 0, remove the price level."}),"\n",(0,n.jsx)(t.li,{children:"Receiving an event that removes a price level that is not in your local order book can happen and is normal."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note:"})," Due to depth snapshots having a limit on the number of price levels, a price level outside of the initial snapshot that doesn't have a quantity change won't have an update in the Diff Depth Stream. Consequently, those price levels will not be visible in the local order book even when applying all updates from the Diff Depth Stream correctly. This can cause the local order book to have some slight differences with the real order book. However, for most use cases the depth limit of 500 is enough to understand the market and trade effectively."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},43023:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>i});var r=o(96540);const n={},s=r.createContext(n);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:t},e.children)}},53863:e=>{e.exports=JSON.parse('{"id":"spot/WebSocket Public/OrderbookManage","title":"Orderbook manage","description":"How to manage a local order book correctly","source":"@site/docs/spot/WebSocket Public/orderBook.mdx","sourceDirName":"spot/WebSocket Public","slug":"/spot/WebSocket Public/OrderbookManage","permalink":"/docs/spot/WebSocket Public/OrderbookManage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/spot/WebSocket Public/orderBook.mdx","tags":[],"version":"current","lastUpdatedBy":"forest","lastUpdatedAt":1761202871000,"sidebarPosition":7,"frontMatter":{"id":"OrderbookManage","title":"Orderbook manage","sidebar_label":"Orderbook manage","sidebar_position":7},"sidebar":"spot","previous":{"title":"Subscription parameters","permalink":"/docs/spot/WebSocket Public/SubscriptionParameters"},"next":{"title":"Trade record","permalink":"/docs/spot/WebSocket Public/TradeRecord"}}')}}]);