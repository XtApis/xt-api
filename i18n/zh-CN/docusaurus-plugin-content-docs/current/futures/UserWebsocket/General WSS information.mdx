---
id: General_WSS_information
title: é€šç”¨ WSS ä¿¡æ¯
sidebar_label: é€šç”¨ WSS ä¿¡æ¯
sidebar_position: 1
---


**WebSocket åŸºç¡€åœ°å€**ï¼š`wss://fstream.xt.com/ws/user`ï¼ˆç”¨æˆ·ç§äººé¢‘é“ï¼‰

---

### è¯·æ±‚å¤´

å‘é€å»ºç«‹ WebSocket è¿æ¥çš„ HTTP è¯·æ±‚æ—¶ï¼Œå»ºè®®æ·»åŠ å‹ç¼©æ‰©å±•åè®®çš„è¯·æ±‚å¤´ï¼š

```http title="å»ºè®®è¯·æ±‚å¤´"
Sec-Websocket-Extensions: permessage-deflate
```

---

### è®¢é˜…æ­¥éª¤

1. è°ƒç”¨æ¥å£è·å– **ListenKey**ï¼š[`GET https://fapi.xt.com/future/user/v1/user/listen-key`](https://fapi.xt.com/future/user/v1/user/listen-key)ã€‚ï¼ˆå»ºè®®åœ¨æ–‡æ¡£ä¾§è¾¹æ è¶…é“¾æ¥åˆ°ã€Œåˆçº¦ API â†’ ç”¨æˆ· â†’ è·å– ListenKeyã€ã€‚ï¼‰
2. å»ºç«‹ WebSocket åï¼Œè®¢é˜…**ç”¨æˆ·ç›¸å…³**äº‹ä»¶æ—¶å‘é€ä»¥ä¸‹ JSONï¼š

```json title="SUBSCRIBE"
{
  "method": "SUBSCRIBE",
  "params": ["{topicä½ å…³æ³¨çš„æ¶ˆæ¯ç§ç±»}@{ä¸Šä¸€æ­¥è·å–çš„ListenKey}"],
  "id": "id_field_could_call_whatever_you_want"
}
```

**æ³¨æ„äº‹é¡¹**
- è‹¥æ”¶åˆ° `invalid_listen_key`ï¼Œè¡¨ç¤º **ListenKey** å·²è¿‡æœŸæˆ–æ— æ•ˆã€‚ğŸ‘‰ éœ€è¦é€šè¿‡æ¥å£é‡æ–°è¯·æ±‚æ–°çš„ ListenKeyã€‚
- ç”¨æˆ·ç›¸å…³æ•°æ®å°†åœ¨**è®¢é˜…æˆåŠŸä¸”æœ‰å˜åŠ¨**æ—¶æ¨é€ã€‚
- å–æ¶ˆè®¢é˜…æ—¶ï¼Œ`method` è®¾ä¸º `UNSUBSCRIBE`ã€‚

---

## è¯·æ±‚æ¶ˆæ¯æ ¼å¼

**è®¢é˜… / å–æ¶ˆè®¢é˜…**

```json title="æ¶ˆæ¯æ ¼å¼"
{
  "method": "SUBSCRIBE/UNSUBSCRIBE",
  "params": [
    "order@{ListenKey}",
    "trade@{ListenKey}",
    "balance@{ListenKey}",
    "position@{ListenKey}",
    "notify@{ListenKey}"
  ],
  "id": "{id}"   // ç”¨æˆ·è‡ªå®šä¹‰
}
```

**è®¢é˜…ç¤ºä¾‹** â€” å»ºç«‹ WebSocket è¿æ¥åï¼Œå‘æœåŠ¡å™¨å‘é€ä¸‹åˆ— JSON å­—ç¬¦ä¸²ï¼š

```json title="SUBSCRIBE ç¤ºä¾‹"
{
  "method": "SUBSCRIBE",
  "params": [
    "order@A246C3DF8EE532DC75007BC5D86698541678596355681"
  ],
  "id": "test1"
}
```

---

## å“åº”æ¶ˆæ¯æ ¼å¼

```json title="æ ¼å¼"
{
  "id":   "{id}",  // å›è°ƒ ID
  "code": 1,        // ç»“æœï¼š0 = æˆåŠŸï¼›1 = å¤±è´¥ï¼›2 = ListenKey æ— æ•ˆ
  "msg":  ""       // è®¢é˜…æˆåŠŸä¸å¦çš„ä¿¡æ¯æˆ–è®¢é˜…çš„ç›®æ ‡ä¿¡æ¯
}
```

```json title="ç¤ºä¾‹"
{"id": "123", "code": 0, "msg": "success"}
```

---

## å¿ƒè·³æ£€æµ‹

æ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥å¿…é¡»å®šæœŸå‘é€**æ–‡æœ¬** `ping` æ¶ˆæ¯ã€‚æœåŠ¡å™¨å°†å›å¤**æ–‡æœ¬** `pong`ã€‚

å¦‚æœæœåŠ¡å™¨åœ¨ **30 ç§’** å†…æœªæ”¶åˆ° `ping`ï¼Œå°†ä¸»åŠ¨æ–­å¼€è¿æ¥ã€‚

---

## é”™è¯¯ç 

| é”™è¯¯ç                      | æè¿°                               |
| --- | --- |
| `{topic}@invalid_listenkey` | ListenKey è¿‡æœŸæˆ–æ— æ•ˆï¼Œè¯·é‡æ–°ç”³è¯· |
| `Invalid Parameter`        | å‚æ•°é”™è¯¯ï¼Œè¯·æ£€æŸ¥ JSON å­—ç¬¦ä¸²     |
````
