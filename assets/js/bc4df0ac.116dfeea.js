"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3868],{65430:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var s=n(76247),r=n(74848),o=n(43023);const i={id:"OrderbookManage",title:"Orderbook manage",sidebar_label:"Orderbook manage",sidebar_position:7},a=void 0,l={},c=[{value:"How to Manage a Local Order Book Correctly",id:"how-to-manage-a-local-order-book-correctly",level:3},{value:"Note",id:"note",level:3}];function d(e){const t={code:"code",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h3,{id:"how-to-manage-a-local-order-book-correctly",children:"How to Manage a Local Order Book Correctly"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Open a stream to: ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"wss://fstream.xt.com/ws/market"})}),", subscribing to ",(0,r.jsx)(t.code,{children:"depth_update@btc_usdt"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Buffer the events you receive from the stream."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Get a depth snapshot from: ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"https://fapi.xt.com/future/market/v1/public/depth?symbol=btc_usdt&level=500"})})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Drop any event where ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"u <= lastUpdateId"})})," in the snapshot."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The first processed event should have ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"fu <= lastUpdateId+1"})})," ",(0,r.jsx)(t.strong,{children:"AND"})," ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"u >= lastUpdateId+1"})}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["While listening to the stream, each new event's ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"fu"})})," should equal the previous event's ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"u+1"})}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The data in each event is the ",(0,r.jsx)(t.strong,{children:"absolute quantity"})," for a price level."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["If the quantity is ",(0,r.jsx)(t.strong,{children:"0"}),", remove the price level."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Receiving an event that removes a price level not present in your local order book ",(0,r.jsx)(t.strong,{children:"can happen and is normal"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"note",children:"Note"}),"\n",(0,r.jsxs)(t.p,{children:["Due to depth snapshots having a ",(0,r.jsx)(t.strong,{children:"limit on the number of price levels"}),", a price level outside of the initial snapshot that doesn't have a quantity change will not have an update in the Diff Depth Stream."]}),"\n",(0,r.jsxs)(t.p,{children:["Consequently, those price levels will not be visible in the local order book even when applying all updates from the Diff Depth Stream correctly, which may cause ",(0,r.jsx)(t.strong,{children:"slight differences"})," compared to the real order book."]}),"\n",(0,r.jsxs)(t.p,{children:["However, for most use cases, the depth limit of ",(0,r.jsx)(t.strong,{children:"500"})," is sufficient to understand the market and trade effectively."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},43023:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var s=n(96540);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}},76247:e=>{e.exports=JSON.parse('{"id":"futures/WebsocKetV2/OrderbookManage","title":"Orderbook manage","description":"How to Manage a Local Order Book Correctly","source":"@site/docs/futures/WebsocKetV2/Orderbook manage.mdx","sourceDirName":"futures/WebsocKetV2","slug":"/futures/WebsocKetV2/OrderbookManage","permalink":"/docs/futures/WebsocKetV2/OrderbookManage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/futures/WebsocKetV2/Orderbook manage.mdx","tags":[],"version":"current","lastUpdatedBy":"forest","lastUpdatedAt":1761291403000,"sidebarPosition":7,"frontMatter":{"id":"OrderbookManage","title":"Orderbook manage","sidebar_label":"Orderbook manage","sidebar_position":7},"sidebar":"futures","previous":{"title":"Subscription parameters","permalink":"/docs/futures/WebsocKetV2/SubscriptionParameters"},"next":{"title":"K-line","permalink":"/docs/futures/WebsocKetV2/Kline"}}')}}]);