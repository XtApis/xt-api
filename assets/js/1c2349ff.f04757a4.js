"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[90723],{97959:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});var i=s(85043),r=s(74848),d=s(43023);const t={id:"SignatureGeneration",title:"Signature generation",sidebar_label:"Signature generation",sidebar_position:5},c=void 0,l={},a=[{value:"Required Headers",id:"required-headers",level:3},{value:"Sample Request Body",id:"sample-request-body",level:3},{value:"1 Data Part Concatenation (<code>Y</code>)",id:"1-data-part-concatenation-y",level:2},{value:"Mini Examples",id:"mini-examples",level:3},{value:"2 Header Part Concatenation (<code>X</code>)",id:"2-header-part-concatenation-x",level:2},{value:"3Generate Signature",id:"3generate-signature",level:2},{value:"4 Complete Example",id:"4-complete-example",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Take ",(0,r.jsx)(n.code,{children:"https://sapi.xt.com/v4/order"})," as an example."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The following ",(0,r.jsx)(n.strong,{children:"appKey/secret"})," are ",(0,r.jsx)(n.strong,{children:"for demo only"})," (Linux bash with ",(0,r.jsx)(n.code,{children:"echo"}),", ",(0,r.jsx)(n.code,{children:"openssl"}),", ",(0,r.jsx)(n.code,{children:"curl"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"appKey"}),": ",(0,r.jsx)(n.code,{children:"3976eb88-76d0-4f6e-a6b2-a57980770085"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"secretKey"}),": ",(0,r.jsx)(n.code,{children:"bc6630d0231fda5cd98794f52c4998659beda290"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"required-headers",children:"Required Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"validate-algorithms: HmacSHA256\nvalidate-appkey: 3976eb88-76d0-4f6e-a6b2-a57980770085\nvalidate-recvwindow: 5000\nvalidate-timestamp: 1641446237201\nvalidate-signature: 2b5eb11e18796d12d88f13dc27dbbd02c2cc51ff7059765ed9821957d82bb4d9\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sample-request-body",children:"Sample Request Body"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "LIMIT",\n  "timeInForce": "GTC",\n  "side": "BUY",\n  "symbol": "btc_usdt",\n  "price": "39000",\n  "quantity": "2"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"1-data-part-concatenation-y",children:["1 Data Part Concatenation (",(0,r.jsx)(n.code,{children:"Y"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"method"}),": uppercase HTTP method, e.g. ",(0,r.jsx)(n.code,{children:"GET"}),", ",(0,r.jsx)(n.code,{children:"POST"}),", ",(0,r.jsx)(n.code,{children:"DELETE"}),", ",(0,r.jsx)(n.code,{children:"PUT"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"path"}),": concrete RESTful path after filling variables, e.g. ",(0,r.jsx)(n.code,{children:"/sign/test/bb/aa"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"query"}),": sort all ",(0,r.jsx)(n.code,{children:"key=value"})," by key (lexicographical), join with ",(0,r.jsx)(n.code,{children:"&"})," example: ",(0,r.jsx)(n.code,{children:"userName=dfdfdf&password=ggg"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"body"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JSON"}),": use the ",(0,r.jsx)(n.strong,{children:"raw JSON string"})," (no conversion/sorting)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"x-www-form-urlencoded"}),": sort all ",(0,r.jsx)(n.code,{children:"key=value"})," by key (lexicographical), join with ",(0,r.jsx)(n.code,{children:"&"})," example: ",(0,r.jsx)(n.code,{children:"userName=dfdfdf&password=ggg"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"form-data"}),": ",(0,r.jsx)(n.strong,{children:"not supported"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["If multiple forms exist, concatenate ",(0,r.jsx)(n.strong,{children:"in order"}),": ",(0,r.jsx)(n.code,{children:"path"})," \u2192 ",(0,r.jsx)(n.code,{children:"query"})," \u2192 ",(0,r.jsx)(n.code,{children:"body"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Finally, splice by ",(0,r.jsx)(n.code,{children:"#"})," ",(0,r.jsx)(n.strong,{children:"with leading markers"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Y = #method#path#query#body\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Notice"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["query present, body empty \u2192 ",(0,r.jsx)(n.code,{children:"Y = #method#path#query"})]}),"\n",(0,r.jsxs)(n.li,{children:["query empty, body present \u2192 ",(0,r.jsx)(n.code,{children:"Y = #method#path#body"})]}),"\n",(0,r.jsxs)(n.li,{children:["both present \u2192 ",(0,r.jsx)(n.code,{children:"Y = #method#path#query#body"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"mini-examples",children:"Mini Examples"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Method"}),": ",(0,r.jsx)(n.code,{children:"POST"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Path"}),": ",(0,r.jsx)(n.code,{children:"/v4/order"})," (recorded as ",(0,r.jsx)(n.code,{children:"path"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Query Example"}),": ",(0,r.jsx)(n.code,{children:"symbol=btc_usdt"})," (recorded as ",(0,r.jsx)(n.code,{children:"query"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Body Examples"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"x-www-form-urlencoded"})," ",(0,r.jsx)(n.code,{children:"symbol=btc_usdt&side=BUY&type=LIMIT&timeInForce=GTC&quantity=1&price=0.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"json"})," ",(0,r.jsx)(n.code,{children:'{"symbol":"btc_usdt","side":"BUY","type":"LIMIT","timeInForce":"GTC","quantity":2,"price":39000}'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Mixed (query + body/json)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["query: ",(0,r.jsx)(n.code,{children:"symbol=btc_usdt&side=BUY&type=LIMIT"})]}),"\n",(0,r.jsxs)(n.li,{children:["body(json): ",(0,r.jsx)(n.code,{children:'{"symbol":"btc_usdt","side":BUY,"type":"LIMIT"}'})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"2-header-part-concatenation-x",children:["2 Header Part Concatenation (",(0,r.jsx)(n.code,{children:"X"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["Sort the following header keys ",(0,r.jsx)(n.strong,{children:"in natural ascending alphabetical order"}),", then join with ",(0,r.jsx)(n.code,{children:"&"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"X = validate-algorithms=HmacSHA256&validate-appkey=3976eb88-76d0-4f6e-a6b2-a57980770085&validate-recvwindow=5000&validate-timestamp=1641446237201\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3generate-signature",children:"3Generate Signature"}),"\n",(0,r.jsxs)(n.p,{children:["Concatenate ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"original = X + Y"})})," (no delimiter beyond the ",(0,r.jsx)(n.code,{children:"#"})," already in ",(0,r.jsx)(n.code,{children:"Y"}),"), then compute:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"signature = org.apache.commons.codec.digest.HmacUtils.hmacSha256Hex(secretKey, original);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Add the generated value to the request header:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"validate-signature: <signature>\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-complete-example",children:"4 Complete Example"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sample original signature message"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'validate-algorithms=HmacSHA256&validate-appkey=2063495b-85ec-41b3-a810-be84ceb78751&validate-recvwindow=60000&validate-timestamp=1666026215729#POST#/v4/order#{"symbol":"XT_USDT","side":"BUY","type":"LIMIT","timeInForce":"GTC","bizType":"SPOT","price":3,"quantity":2}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sample request (cURL)"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl --location --request POST \'https://sapi.xt.com/v4/order\' \\\n  --header \'accept: */*\' \\\n  --header \'Content-Type: application/json\' \\\n  --header \'validate-algorithms: HmacSHA256\' \\\n  --header \'validate-appkey: 10c172ca-d791-4da5-91cd-e74d202dac96\' \\\n  --header \'validate-recvwindow: 60000\' \\\n  --header \'validate-timestamp: 1666026215729\' \\\n  --header \'validate-signature: 4cb36e820f50d2e353e5e0a182dc4a955b1c26efcb4b513d81eec31dd36072ba\' \\\n  --data-raw \'{"symbol":"XT_USDT","side":"BUY","type":"LIMIT","timeInForce":"GTC","bizType":"SPOT","price":3,"quantity":2}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Matters needing attention"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.strong,{children:"Content-Type"}),", ",(0,r.jsx)(n.strong,{children:"signature original message"}),", and ",(0,r.jsx)(n.strong,{children:"final request payload"})," are ",(0,r.jsx)(n.strong,{children:"consistent"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validate-timestamp"})," should be ",(0,r.jsx)(n.strong,{children:"milliseconds"})," of the ",(0,r.jsx)(n.strong,{children:"send time"}),"; pair with a reasonable ",(0,r.jsx)(n.code,{children:"validate-recvwindow"})," to tolerate network jitter."]}),"\n",(0,r.jsxs)(n.li,{children:["When body is JSON, use the ",(0,r.jsx)(n.strong,{children:"exact raw JSON string"})," for signing (don\u2019t reorder keys or prettify)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},43023:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(96540);const r={},d=i.createContext(r);function t(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(d.Provider,{value:n},e.children)}},85043:e=>{e.exports=JSON.parse('{"id":"spot/Access Description/SignatureGeneration","title":"Signature generation","description":"Take https://sapi.xt.com/v4/order as an example.","source":"@site/docs/spot/Access Description/signSteps.mdx","sourceDirName":"spot/Access Description","slug":"/spot/Access Description/SignatureGeneration","permalink":"/docs/spot/Access Description/SignatureGeneration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/spot/Access Description/signSteps.mdx","tags":[],"version":"current","lastUpdatedBy":"enjuppa","lastUpdatedAt":1761031811000,"sidebarPosition":5,"frontMatter":{"id":"SignatureGeneration","title":"Signature generation","sidebar_label":"Signature generation","sidebar_position":5},"sidebar":"spot","previous":{"title":"Signature Instructions","permalink":"/docs/spot/Access Description/SignatureInstructions"},"next":{"title":"API Key Application Steps","permalink":"/docs/spot/Access Description/ApiKeyApplicationSteps"}}')}}]);