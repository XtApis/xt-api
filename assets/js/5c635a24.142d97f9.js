"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[66950],{34880:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});var t=r(49636),s=r(74848),i=r(43023);const a={id:"SignatureGeneration",title:"Signature generation",sidebar_label:"Signature generation",sidebar_position:5},d=void 0,c={},l=[{value:"Header part data",id:"header-part-data",level:3},{value:"Request data",id:"request-data",level:3},{value:"1. Data part",id:"1-data-part",level:3},{value:"2. Request header part",id:"2-request-header-part",level:3},{value:"3. Generate signature",id:"3-generate-signature",level:3},{value:"4. Example",id:"4-example",level:3},{value:"Matters needing attention",id:"matters-needing-attention",level:3}];function o(e){const n={admonition:"admonition",code:"code",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Take ",(0,s.jsx)(n.code,{children:"https://sapi.xt.com/v4/order"})," as an example."]}),"\n",(0,s.jsxs)(n.p,{children:["The following is an example ",(0,s.jsx)(n.strong,{children:"appkey"})," and ",(0,s.jsx)(n.strong,{children:"secret"})," for placing an order using echo openssl and curl tools in the Linux bash environment (for demonstration purposes only):"]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.mdxAdmonitionTitle,{children:[(0,s.jsx)(n.strong,{children:"Key:"})," AppKey: 3976eb88-76d0-4f6e-a6b2-a57980770085"]}),(0,s.jsx)(n.p,{children:"SecretKey: bc6630d0231fda5cd98794f52c4998659beda290 :::"}),(0,s.jsx)(n.h3,{id:"header-part-data",children:"Header part data"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"validate-algorithms: HmacSHA256\nvalidate-appkey: 3976eb88-76d0-4f6e-a6b2-a57980770085\nvalidate-recvwindow: 5000\nvalidate-timestamp: 1641446237201\nvalidate-signature: 2b5eb11e18796d12d88f13dc27dbbd02c2cc51ff7059765ed9821957d82bb4d9\n"})}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"request-data",children:"Request data"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "LIMIT",\n  "timeInForce": "GTC",\n  "side": "BUY",\n  "symbol": "btc_usdt",\n  "price": "39000",\n  "quantity": "2"\n}\n'})}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"1-data-part",children:"1. Data part"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"method"}),": UpperCase method. eg: ",(0,s.jsx)(n.code,{children:"GET"}),", ",(0,s.jsx)(n.code,{children:"POST"}),", ",(0,s.jsx)(n.code,{children:"DELETE"}),", ",(0,s.jsx)(n.code,{children:"PUT"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"path"}),": Concatenate all values in the order in path. e.g. ",(0,s.jsx)(n.code,{children:"/sign/test/bb/aa"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"query"}),": Sort all key=value according to lexicographical order. Example: ",(0,s.jsx)(n.code,{children:"userName=dfdfdf&password=ggg"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"body"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JSON: use JSON string directly"}),"\n",(0,s.jsx)(n.li,{children:"x-www-form-urlencoded: sort all key=values by lexicographical order"}),"\n",(0,s.jsx)(n.li,{children:"form-data: not supported"}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["Re-splicing order: ",(0,s.jsx)(n.code,{children:"path + query + body"})]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Method: ",(0,s.jsx)(n.code,{children:"POST"})]}),"\n",(0,s.jsxs)(n.li,{children:["Path: ",(0,s.jsx)(n.code,{children:"/v4/order"})]}),"\n",(0,s.jsxs)(n.li,{children:["Query: ",(0,s.jsx)(n.code,{children:"symbol=btc_usdt"})]}),"\n",(0,s.jsxs)(n.li,{children:["Body (x-www-form-urlencoded):","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"symbol=btc_usdt&side=BUY&type=LIMIT&timeInForce=GTC&quantity=1&price=0.1\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Body (json):","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "symbol": "btc_usdt",\n  "side": "BUY",\n  "type": "LIMIT",\n  "timeInForce": "GTC",\n  "quantity": 2,\n  "price": 39000\n}\n'})}),"\n"]}),"\n"]}),(0,s.jsx)(n.p,{children:"Mixed usage:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Query: symbol=btc_usdt&side=BUY&type=LIMIT\nBody: {"symbol":"btc_usdt","side":"BUY","type":"LIMIT"}\n'})}),(0,s.jsx)(n.p,{children:"Final concatenated value (Y):"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Y = #method#path#query#body\n"})}),(0,s.jsx)(n.p,{children:"Rules:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["query has data, body empty \u2192 ",(0,s.jsx)(n.code,{children:"Y=#method#path#query"})]}),"\n",(0,s.jsxs)(n.li,{children:["query empty, body has data \u2192 ",(0,s.jsx)(n.code,{children:"Y=#method#path#body"})]}),"\n",(0,s.jsxs)(n.li,{children:["both exist \u2192 ",(0,s.jsx)(n.code,{children:"Y=#method#path#query#body"})]}),"\n"]}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"2-request-header-part",children:"2. Request header part"}),(0,s.jsxs)(n.p,{children:["Keys sorted in natural ascending alphabetical order, joined with ",(0,s.jsx)(n.code,{children:"&"})," to form X."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"validate-algorithms=HmacSHA256&validate-appkey=3976eb88-76d0-4f6e-a6b2-a57980770085&validate-recvwindow=5000&validate-timestamp=1641446237201\n"})}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"3-generate-signature",children:"3. Generate signature"}),(0,s.jsx)(n.p,{children:"Final string to encrypt:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"original = X + Y\n"})}),(0,s.jsx)(n.p,{children:"Signature generation:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"signature = org.apache.commons.codec.digest.HmacUtils.hmacSha256Hex(secretKey, original);\n"})}),(0,s.jsx)(n.p,{children:"Put the generated signature in request header:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"validate-signature: {signature}\n"})}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"4-example",children:"4. Example"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Original signature message"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'validate-algorithms=HmacSHA256&validate-appkey=2063495b-85ec-41b3-a810-be84ceb78751&validate-recvwindow=60000&validate-timestamp=1666026215729#POST#/v4/order#{"symbol":"XT_USDT","side":"BUY","type":"LIMIT","timeInForce":"GTC","bizType":"SPOT","price":3,"quantity":2}\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Sample request message"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl --location --request POST \'https://sapi.xt.com/v4/order\' \\\n--header \'accept: */*\' \\\n--header \'Content-Type: application/json\' \\\n--header \'validate-algorithms: HmacSHA256\' \\\n--header \'validate-appkey: 10c172ca-d791-4da5-91cd-e74d202dac96\' \\\n--header \'validate-recvwindow: 60000\' \\\n--header \'validate-timestamp: 1666026215729\' \\\n--header \'validate-signature: 4cb36e820f50d2e353e5e0a182dc4a955b1c26efcb4b513d81eec31dd36072ba\' \\\n--data-raw \'{"symbol":"XT_USDT","side":"BUY","type":"LIMIT","timeInForce":"GTC","bizType":"SPOT","price":3,"quantity":2}\'\n'})}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.h3,{id:"matters-needing-attention",children:"Matters needing attention"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.strong,{children:"Content-Type"})," format"]}),"\n",(0,s.jsx)(n.li,{children:"Verify signature original message matches request body"}),"\n",(0,s.jsx)(n.li,{children:"Validate request header parameters"}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},43023:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>d});var t=r(96540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},49636:e=>{e.exports=JSON.parse('{"id":"user-center/Access Description/SignatureGeneration","title":"Signature generation","description":"Take https://sapi.xt.com/v4/order as an example.","source":"@site/docs/user-center/Access Description/signSteps.mdx","sourceDirName":"user-center/Access Description","slug":"/user-center/Access Description/SignatureGeneration","permalink":"/docs/user-center/Access Description/SignatureGeneration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/user-center/Access Description/signSteps.mdx","tags":[],"version":"current","lastUpdatedBy":"forest","lastUpdatedAt":1760698765000,"sidebarPosition":5,"frontMatter":{"id":"SignatureGeneration","title":"Signature generation","sidebar_label":"Signature generation","sidebar_position":5},"sidebar":"user-center","previous":{"title":"Signature Instructions","permalink":"/docs/user-center/Access Description/SignatureInstructions"},"next":{"title":"response code","permalink":"/docs/user-center/Access Description/ResponseCode"}}')}}]);