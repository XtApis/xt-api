"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9476],{9028:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var t=n(89046),r=n(74848),i=n(43023);const o={id:"General_WSS_information",title:"General WSS information",sidebar_label:"General WSS information",sidebar_position:1},a=void 0,l={},c=[{value:"Request headers",id:"request-headers",level:3},{value:"Subscription steps",id:"subscription-steps",level:3},{value:"Request message format",id:"request-message-format",level:2},{value:"Response message format",id:"response-message-format",level:2},{value:"Heartbeat",id:"heartbeat",level:2},{value:"Error codes",id:"error-codes",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"WebSocket base URL"}),": ",(0,r.jsx)(s.code,{children:"wss://fstream.xt.com/ws/user"})," ",(0,r.jsx)(s.em,{children:"(User private channel)"})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"request-headers",children:"Request headers"}),"\n",(0,r.jsx)(s.p,{children:"When initiating the WebSocket upgrade request, it is recommended to enable the per\u2011message compression extension:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-http",metastring:'title="Recommended header"',children:"Sec-Websocket-Extensions: permessage-deflate\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"subscription-steps",children:"Subscription steps"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Call the API to obtain a ",(0,r.jsx)(s.strong,{children:"ListenKey"}),": ",(0,r.jsx)(s.a,{href:"https://fapi.xt.com/future/user/v1/user/listen-key",children:(0,r.jsx)(s.code,{children:"GET https://fapi.xt.com/future/user/v1/user/listen-key"})}),". ",(0,r.jsx)(s.em,{children:"(Tip: you may also link to \u201cContract API \u2192 User \u2192 Get ListenKey\u201d in your docs sidebar.)"})]}),"\n",(0,r.jsxs)(s.li,{children:["After the WebSocket connection is established, to subscribe to ",(0,r.jsx)(s.strong,{children:"user\u2011related"})," events, send the JSON below:"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="SUBSCRIBE"',children:'{\n  "method": "SUBSCRIBE",\n  "params": ["{topic_you_follow}@{ListenKey_from_step_1}"],\n  "id": "id_field_could_call_whatever_you_want"\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Notes"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["If you receive ",(0,r.jsx)(s.code,{children:"invalid_listen_key"}),", the ListenKey has expired or is invalid. \ud83d\udc49 Request a new ListenKey via API."]}),"\n",(0,r.jsxs)(s.li,{children:["User data is pushed ",(0,r.jsx)(s.strong,{children:"after subscription succeeds"})," and when there is a change."]}),"\n",(0,r.jsxs)(s.li,{children:["To unsubscribe, set ",(0,r.jsx)(s.code,{children:"method"})," to ",(0,r.jsx)(s.code,{children:"UNSUBSCRIBE"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"request-message-format",children:"Request message format"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Subscribe / Unsubscribe"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="Message format"',children:'{\n  "method": "SUBSCRIBE/UNSUBSCRIBE",\n  "params": [\n    "order@{ListenKey}",\n    "trade@{ListenKey}",\n    "balance@{ListenKey}",\n    "position@{ListenKey}",\n    "notify@{ListenKey}"\n  ],\n  "id": "{id}" // user-defined\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Subscribe example"})," \u2014 After the WebSocket is established, send the JSON below to the server."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="SUBSCRIBE example"',children:'{\n  "method": "SUBSCRIBE",\n  "params": ["order@A246C3DF8EE532DC75007BC5D86698541678596355681"],\n  "id": "test1"\n}\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"response-message-format",children:"Response message format"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="Format"',children:'{\n  "id": "{id}", // callback ID\n  "code": 1, // result: 0 = success; 1 = failure; 2 = ListenKey invalid\n  "msg": "" // message of subscription result / details\n}\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="Example"',children:'{"id": "123", "code": 0, "msg": "success"}\n'})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"heartbeat",children:"Heartbeat"}),"\n",(0,r.jsxs)(s.p,{children:["Each client connection must periodically send a ",(0,r.jsx)(s.strong,{children:"text"})," ",(0,r.jsx)(s.code,{children:"ping"})," message. The server will reply with a ",(0,r.jsx)(s.strong,{children:"text"})," ",(0,r.jsx)(s.code,{children:"pong"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["If the server does not receive a ",(0,r.jsx)(s.code,{children:"ping"})," within ",(0,r.jsx)(s.strong,{children:"30 seconds"}),", it will proactively close the connection."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"error-codes",children:"Error codes"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Error code"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"{topic}@invalid_listenkey"})}),(0,r.jsx)(s.td,{children:"ListenKey expired or invalid. Please request again."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"Invalid Parameter"})}),(0,r.jsx)(s.td,{children:"Invalid parameters. Please check the JSON string."})]})]})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},43023:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var t=n(96540);const r={},i=t.createContext(r);function o(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:s},e.children)}},89046:e=>{e.exports=JSON.parse('{"id":"futures/UserWebsocket/General_WSS_information","title":"General WSS information","description":"WebSocket base URL//fstream.xt.com/ws/user (User private channel)","source":"@site/docs/futures/UserWebsocket/General WSS information.mdx","sourceDirName":"futures/UserWebsocket","slug":"/futures/UserWebsocket/General_WSS_information","permalink":"/docs/futures/UserWebsocket/General_WSS_information","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/futures/UserWebsocket/General WSS information.mdx","tags":[],"version":"current","lastUpdatedBy":"enjuppa","lastUpdatedAt":1765185093000,"sidebarPosition":1,"frontMatter":{"id":"General_WSS_information","title":"General WSS information","sidebar_label":"General WSS information","sidebar_position":1},"sidebar":"futures","previous":{"title":"Collect Trading Pair","permalink":"/docs/futures/User/CollectTradingPair"},"next":{"title":"Balance change","permalink":"/docs/futures/UserWebsocket/BalanceChange"}}')}}]);