"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3868],{65430:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var r=n(76247),s=n(74848),o=n(43023);const i={id:"OrderbookManage",title:"Orderbook manage",sidebar_label:"Orderbook manage",sidebar_position:7},a=void 0,l={},d=[{value:"Order book management \u2705",id:"order-book-management-",level:2},{value:"Notes",id:"notes",level:3}];function c(e){const t={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"order-book-management-",children:"Order book management \u2705"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"How to maintain a local order book correctly"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Connect to ",(0,s.jsx)(t.code,{children:"wss://fstream.xt.com/ws/market"}),", subscribe to ",(0,s.jsx)(t.code,{children:"depth_update@btc_usdt"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Buffer events received from the stream."}),"\n",(0,s.jsxs)(t.li,{children:["Fetch a depth snapshot: ",(0,s.jsx)(t.code,{children:"https://fapi.xt.com/future/market/v1/public/depth?symbol=btc_usdt&level=500"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Discard any event where ",(0,s.jsx)(t.code,{children:"u <= lastUpdateId"})," in the snapshot."]}),"\n",(0,s.jsxs)(t.li,{children:["The first processed event should satisfy ",(0,s.jsx)(t.code,{children:"fu <= lastUpdateId + 1"})," and ",(0,s.jsx)(t.code,{children:"u >= lastUpdateId + 1"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["While listening, each new event's ",(0,s.jsx)(t.code,{children:"fu"})," should equal the previous event's ",(0,s.jsx)(t.code,{children:"u + 1"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["The data in each event represents the ",(0,s.jsx)(t.strong,{children:"absolute"})," quantity at each price level."]}),"\n",(0,s.jsxs)(t.li,{children:["If a quantity is ",(0,s.jsx)(t.code,{children:"0"}),", remove that price level."]}),"\n",(0,s.jsx)(t.li,{children:"Receiving deletion events for a local price level that does not exist may occur and is normal."}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(t.p,{children:["Due to the limited number of price levels in the depth snapshot, levels with ",(0,s.jsx)(t.strong,{children:"no changes"})," after the initial snapshot will not appear in the incremental depth stream. Therefore, even if you apply all updates correctly, those levels will not be visible in the local order book, which may lead to minor discrepancies from the actual order book. However, for most use cases, a 500\u2011level depth limit is sufficient to understand the market and trade effectively."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},43023:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(96540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}},76247:e=>{e.exports=JSON.parse('{"id":"futures/WebsocKetV2/OrderbookManage","title":"Orderbook manage","description":"Order book management \u2705","source":"@site/docs/futures/WebsocKetV2/Orderbook manage.mdx","sourceDirName":"futures/WebsocKetV2","slug":"/futures/WebsocKetV2/OrderbookManage","permalink":"/docs/futures/WebsocKetV2/OrderbookManage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/main/website/docs/futures/WebsocKetV2/Orderbook manage.mdx","tags":[],"version":"current","lastUpdatedBy":"enjuppa","lastUpdatedAt":1763440838000,"sidebarPosition":7,"frontMatter":{"id":"OrderbookManage","title":"Orderbook manage","sidebar_label":"Orderbook manage","sidebar_position":7},"sidebar":"futures","previous":{"title":"General WSS information","permalink":"/docs/futures/WebsocKetV2/General_WSS_information"},"next":{"title":"K-line","permalink":"/docs/futures/WebsocKetV2/Kline"}}')}}]);